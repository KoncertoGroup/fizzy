<%= tag.div \
      class: "bar full-width flex flex-column justify-end",
      data: {
        controller: "bar",
        bar_dialog_outlet: "#bar-modal",
        bar_search_url_value: search_path,
        bar_search_turbo_frame_name_value: "search",
        bar_ask_url_value: conversation_path,
        bar_ask_turbo_frame_name_value: "conversation",
        action: "
          keydown.meta+k@document->bar#search keydown.ctrl+k@document->bar#search
          keydown.meta+a@document->bar#ask keydown.ctrl+a@document->bar#ask"
      } do %>
  <div class="flex justify-center gap" hidden>
    <button class="btn btn--plain" data-action="bar#search">
      <span>Search [<%= hotkey_label(["ctrl", "K"]) %>]</span>
    </button>
    <span>or</span>
    <button class="btn btn--plain" data-action="bar#ask">
      <span>Ask [<%= hotkey_label(["ctrl", "A"]) %>]</span>
    </button>
  </div>

  <%= render "searches/form", query_terms: @query_terms %>

  <%= tag.dialog \
    id: "bar-modal",
    class: "bar__modal shadow",
    data: {
      controller: "dialog",
      dialog_target: "dialog",
      dialog_modal_value: "false",
      action: "keydown.esc->dialog#close" } do %>
    <%= turbo_frame_tag "fizzy-bar", data: { bar_target: "turboFrame" } %>
  <% end %>
<% end %>
